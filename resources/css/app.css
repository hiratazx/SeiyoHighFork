@tailwind base;
@tailwind components;
@tailwind utilities;

/* Chrome autofill background override */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px #1a1308 inset !important;
  -webkit-text-fill-color: white !important;
  caret-color: white !important;
}

/* ========================================
   LANDING PAGE / MARKETING STYLES
   ======================================== */

@layer base {
  /* Game font family - applied when needed */
  .game-font {
    font-family: 'M PLUS Rounded 1c', 'Noto Sans JP', 'Noto Sans SC', 'Noto Sans', sans-serif;
  }
}

@layer components {
  /* Glass morphism panel */
  .glass-panel {
    background: rgba(34, 26, 16, 0.75);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(244, 157, 37, 0.1);
  }

  /* Hero gradient overlay */
  .hero-gradient {
    background: linear-gradient(to bottom, rgba(26, 26, 46, 0.2) 0%, rgba(34, 26, 16, 0.9) 100%);
  }

  /* Primary button style */
  .btn-primary {
    @apply flex items-center justify-center rounded-xl h-14 px-8 bg-primary text-background-dark text-lg font-bold tracking-tight transition-transform hover:scale-105;
    box-shadow: 0 0 40px rgba(244, 157, 37, 0.3);
  }

  /* Secondary/ghost button */
  .btn-secondary {
    @apply flex items-center justify-center rounded-xl h-14 px-8 bg-white/5 border border-white/10 text-white text-lg font-medium transition-colors hover:bg-white/10;
    backdrop-filter: blur(12px);
  }

  /* Feature card */
  .feature-card {
    @apply flex flex-col gap-6 p-6 rounded-2xl glass-panel transition-all hover:border-primary/40 hover:translate-y-[-4px];
  }

  /* Character card */
  .character-card {
    @apply relative overflow-hidden rounded-2xl h-[400px] shadow-2xl cursor-pointer;
  }

  /* CTA panel with gradient border */
  .cta-panel {
    @apply p-1 rounded-3xl;
    background: linear-gradient(to right, rgba(244, 157, 37, 0.4), rgba(244, 157, 37, 0.1), transparent);
    box-shadow: 0 0 100px rgba(244, 157, 37, 0.1);
  }

  /* Floating navbar */
  .floating-nav {
    @apply flex w-full max-w-[960px] items-center justify-between whitespace-nowrap glass-panel rounded-full px-4 md:px-8 py-3;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  }
}

@layer utilities {
  .bg-default {
    @apply bg-gradient-to-br from-indigo-200 via-red-200 to-yellow-100;
  }

  /* Improve background image rendering quality on high-DPI screens */
  .bg-cover {
    image-rendering: auto;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  .vn-textbox {
    @apply w-[98%] max-w-5xl 2xl:max-w-6xl mx-auto;
    @apply bg-gradient-to-br from-gray-900/90 via-blue-950/85 to-indigo-950/90 backdrop-blur-sm text-white rounded-2xl;
    @apply p-3 md:p-4 shadow-2xl border-2 border-white/30 shadow-white/10 shadow-[0_0_20px];
    @apply flex flex-col flex-shrink-0;
    @apply min-h-0 max-h-[50vh] md:max-h-[42vh];
  }

  .vn-modal-panel {
    @apply w-full bg-gradient-to-br from-gray-900/90 via-blue-950/85 to-indigo-950/90 backdrop-blur-sm text-white rounded-2xl;
    @apply p-6 md:p-8 shadow-2xl border-2 border-cyan-400/30 shadow-cyan-400/10 shadow-[0_0_20px];
  }

  .vn-textbox .custom-scrollbar {
    /* Fixed height to prevent layout shift when dialogue history grows */
    @apply h-[120px] md:h-[150px] 2xl:h-[200px];
  }

  .vn-speaker {
    @apply text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 drop-shadow-lg;
  }

  .vn-dialogue {
    @apply flex-grow text-sm md:text-base lg:text-lg font-medium leading-snug md:leading-relaxed;
  }

  .vn-choices {
    @apply grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-3 mt-2 md:mt-4;
  }

  .vn-choice-button {
    @apply w-full bg-black/20 text-white/80 font-semibold py-2 px-3 md:py-3 md:px-4 text-xs md:text-base rounded-lg border-2 border-white/50 transition-all duration-200 ease-in-out backdrop-blur-sm disabled:opacity-50 disabled:cursor-not-allowed;
    @apply hover:bg-white/20 hover:border-white/80 hover:text-white focus:outline-none focus:ring-4 focus:ring-white/50;
  }

  .vn-character-container {
    @apply flex-grow relative;
    @apply grid justify-items-center items-end w-full max-w-7xl mx-auto;
    @apply gap-y-4 gap-x-2 md:gap-y-6 md:gap-x-4;
    @apply content-end;
    @apply pointer-events-none;
    @apply p-3 pb-3 md:p-5 md:pb-8;
  }

  .vn-character-container.two-rows-active {
    @apply gap-y-5 md:gap-y-8;
  }

  .vn-character {
    @apply relative h-[28vh] md:h-[30vh] lg:h-[32vh] w-full;
    @apply max-h-[280px] 2xl:max-h-[380px];
    @apply bg-black/30 rounded-2xl border-2 border-white/10;
    @apply p-1;
    @apply transition-all duration-500 ease-in-out pointer-events-auto;
  }

  .two-rows-active .vn-character {
    @apply h-[18vh] md:h-[22vh] lg:h-[24vh];
    @apply max-h-[200px] 2xl:max-h-[280px];
  }

  .vn-text-input {
    @apply w-full flex-grow bg-white/10 text-white placeholder-gray-400 font-semibold py-3 px-4 rounded-lg border-2 border-transparent transition-all duration-200 ease-in-out;
    @apply focus:bg-white/20 focus:border-white/80 focus:outline-none focus:ring-4 focus:ring-white/50 disabled:opacity-50;
  }

  .vn-send-button {
    @apply bg-black/40 text-white font-bold py-3 px-6 rounded-lg border-2 border-white/70 transition-all duration-300 ease-in-out backdrop-blur-sm shrink-0;
    @apply hover:bg-white/20 hover:border-white hover:text-white hover:scale-105 focus:outline-none focus:ring-4 focus:ring-white/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100;
  }

  .vn-ui-button {
    @apply text-cyan-200/70 font-semibold px-2 py-0.5 md:px-3 md:py-1 transition-all duration-200 hover:bg-white/10 hover:text-white rounded-md cursor-pointer;
  }

  .vn-primary-button {
    @apply w-64 bg-black/40 text-white font-bold text-xl py-4 px-6 rounded-lg border-2 border-white/70 transition-all duration-300 ease-in-out backdrop-blur-sm;
    @apply hover:bg-white/20 hover:border-white hover:text-white hover:scale-105 focus:outline-none focus:ring-4 focus:ring-white/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-600/50;
  }

  .vn-secondary-button {
    @apply bg-black/20 text-white/80 font-semibold py-2 px-5 rounded-lg border-2 border-white/50 transition-all duration-200 ease-in-out backdrop-blur-sm;
    @apply hover:bg-white/20 hover:border-white/80 hover:text-white focus:outline-none focus:ring-4 focus:ring-white/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Main menu specific darker variants */
  .vn-primary-button-dark {
    @apply w-64 bg-black/60 text-white font-bold text-xl py-4 px-6 rounded-lg border-2 border-white/70 transition-all duration-300 ease-in-out backdrop-blur-sm;
    @apply hover:bg-black/70 hover:border-white hover:text-white hover:scale-105 focus:outline-none focus:ring-4 focus:ring-white/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-600/50;
  }

  .vn-secondary-button-dark {
    @apply bg-black/50 text-white/90 font-semibold py-2 px-5 rounded-lg border-2 border-white/50 transition-all duration-200 ease-in-out backdrop-blur-sm;
    @apply hover:bg-black/60 hover:border-white/80 hover:text-white focus:outline-none focus:ring-4 focus:ring-white/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Main menu specific amber outline variants */
  .vn-primary-button-amber {
    @apply w-64 bg-black/40 text-white font-bold text-xl py-4 px-6 rounded-lg border-2 border-amber-500/70 transition-all duration-300 ease-in-out backdrop-blur-sm;
    @apply hover:bg-amber-500/20 hover:border-amber-400 hover:text-white hover:scale-105 focus:outline-none focus:ring-4 focus:ring-amber-500/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-600/50;
  }

  .vn-secondary-button-amber {
    @apply bg-black/20 text-white/80 font-semibold py-2 px-5 rounded-lg border-2 border-amber-500/50 transition-all duration-200 ease-in-out backdrop-blur-sm;
    @apply hover:bg-amber-500/20 hover:border-amber-400 hover:text-white focus:outline-none focus:ring-4 focus:ring-amber-500/50;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .day-transition-overlay {
    @apply fixed inset-0 bg-black z-50 flex items-center justify-center text-white transition-opacity duration-500 ease-in-out;
  }

  .day-transition-text {
    @apply text-5xl font-bold transition-all duration-700 ease-in-out;
  }

  .segment-transition-overlay {
    @apply fixed inset-0 bg-black z-50 flex items-center justify-center text-white transition-opacity duration-300 ease-in-out;
  }

  .segment-transition-text {
    @apply text-4xl font-bold transition-all duration-500 ease-in-out;
  }

  .text-shadow-medium {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }

  .text-shadow-heavy {
    text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.7);
  }

  .model-notification {
    @apply absolute top-4 left-1/2 -translate-x-1/2 w-auto max-w-[90%] bg-purple-900/80 backdrop-blur-sm text-white px-6 py-3 rounded-lg z-50 shadow-lg border-2 border-purple-500/50 text-center;
    animation: fadeIn 0.5s ease-out, fadeOut 0.5s ease-in 7.5s forwards;
  }

  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.5);
  }

  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
  }

  /* Character Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes fadeOut {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.95); }
  }

  .animate-fade-in {
    animation: fadeIn 1s ease-out forwards;
  }

  .animate-fade-out {
    animation: fadeOut 2s ease-in forwards;
  }

  /* Custom responsive adjustments for landscape on small devices */
  @media (orientation: landscape) and (max-height: 550px) {
    .vn-textbox {
      @apply min-h-[200px] max-h-[90vh] p-3;
    }

    .vn-character-container {
      @apply p-2 pb-4;
    }

    .vn-speaker {
      @apply text-lg mb-1;
    }

    .vn-dialogue {
      @apply text-sm leading-snug;
    }

    .vn-textbox .custom-scrollbar {
      /* Fixed height for mobile to prevent layout shift */
      @apply h-[70px];
    }

    .vn-text-input,
    .vn-send-button {
      @apply py-2;
    }
  }
}
